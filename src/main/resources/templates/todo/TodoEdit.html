<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      th:replace="~{components/template :: layout(~{::title},~{::body/content()})}">
<head>
    <meta charset="UTF-8">
    <title th:text="#{text.todo.title}"></title>
</head>
<body>
    <div class="mt-3">
        <div>
            <a th:href="@{/todo/cancel}" class="btn btn-secondary">
                <i class="bi bi-chevron-left"></i>
            </a>
        </div>
        <br>
        <!-- 編集フォーム -->
        <form th:action="@{/}" method="post" th:object="${updateForm}">
            <div class="card">
                <div class="card-body">
                    <div class="mb-1">
                        <label for="title" class="form-label" th:text="#{text.todo.id}"></label>
                        <input type="text" th:field="*{id}" class="form-control" disabled>
                        <input type="hidden" th:field="*{id}" class="form-control">

                        <label for="title" class="form-label" th:text="#{text.todo.title}"></label>
                        <input type="text"
                                th:field="*{title}"
                                th:classappend="${#fields.hasErrors('title')} ? 'is-invalid'"
                                class="form-control">
                        <p class="invalid-feedback" th:if="${#fields.hasErrors('title')}" th:errors="*{title}">errora</p>

                        <label for="title" class="form-label" th:text="#{text.todo.description}"></label>
                        <input type="text"
                                th:field="*{description}"
                                th:classappend="${#fields.hasErrors('*{description}')} ? 'is-invalid'"
                                class="form-control">
                        <p class="invalid-feedback" th:if="${#fields.hasErrors('*{description}')}" th:errors="*{description}">errob</p>
            
                        <!-- 開始日 -->
                        <label for="title" class="form-label" th:text="#{text.todo.startDate}"></label>
                        <input type="date"
                                th:value="${#dates.format(startDate, 'yyyy-MM-dd')}" th:field="*{startDate}"
                                th:classappend="${#fields.hasErrors('*{startDate}')} ? 'is-invalid'"
                                class="form-control">
                        <p class="invalid-feedback" th:if="${#fields.hasErrors('*{startDate}')}" th:errors="*{startDate}">errorc</p>
                
                        <!-- 締め切り -->
                        <label for="title" class="form-label" th:text="#{text.todo.deadline}"></label>
                        <input type="date"
                                th:value="${#dates.format(deadline, 'yyyy-MM-dd')}" th:field="*{deadline}"
                                th:classappend="${#fields.hasErrors('*{deadline}')} ? 'is-invalid'"
                                class="form-control">
                        <p class="invalid-feedback" th:if="${#fields.hasErrors('*{deadline}')}" th:errors="*{deadline}">errorc</p>
                
                        <!-- 進捗 -->
                        <label for="title" class="form-label" th:text="#{text.todo.progress}"></label>
                        <input type="number" min="0" oninput="this.value = Math.abs(this.value)"
                                th:field="*{progress}"
                                th:classappend="${#fields.hasErrors('*{progress}')} ? 'is-invalid'"
                                class="form-control">
                        <p class="invalid-feedback" th:if="${#fields.hasErrors('*{progress}')}" th:errors="*{progress}">errorc</p>
                
                        <div class="text-center d-glex justify-content-center">
                            <button class="btn btn-success" type="submit" th:formaction="@{/todo/update}">
                                <i class="bi bi-check-lg"></i>
                                <span class="ms-1" th:text="#{text.common.update}"></span>
                            </button>

                            <button class="btn btn-danger" type="submit" th:formaction="@{/todo/delete}">
                                <i class="bi bi-trash3-fill" th:text="#{text.common.delete}"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

        </form>
    </div>
</body>
</html>